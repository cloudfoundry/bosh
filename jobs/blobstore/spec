---
name: blobstore

templates:
  nginx_ctl: bin/nginx_ctl
  nginx.conf.erb: config/nginx.conf
  blobstore.conf.erb: config/sites/blobstore.conf
  mime.types: config/mime.types
  read_users.erb: config/read_users
  write_users.erb: config/write_users
  bbr_backup: bin/bbr/backup
  bbr_restore: bin/bbr/restore
  server_tls_cert.pem.erb: config/server_tls_cert.pem
  server_tls_private_key.pem.erb: config/server_tls_private_key.pem

packages:
- nginx

properties:
  blobstore.port:
    description: TCP port blobstore server (ngnix) listens on
    default: 25250
  blobstore.ipv6_listen:
    description: Enable binding to IPv6 addresses
    default: false
  blobstore.allow_http:
    description: Enable http connections to blobstore, in addition to https
    default: true

  blobstore.director.user:
    description: Username director must use to access blobstore via HTTP Basic
  blobstore.director.password:
    description: Password director must use to access blobstore via HTTP Basic

  blobstore.agent.user:
    description: Username agents must use to access blobstore via HTTP Basic
  blobstore.agent.password:
    description: Password agents must use to access blobstore via HTTP Basic

  blobstore.max_upload_size:
    description: Max allowed file size for upload
    default: 5000m

  blobstore.nginx.workers:
    description: Number of nginx workers for blobstore
    default: 2

  blobstore.tls.cert.certificate:
      description: SSL cert for blobstore nginx server

  blobstore.tls.cert.private_key:
      description: SSL cert key for blobstore nginx server
